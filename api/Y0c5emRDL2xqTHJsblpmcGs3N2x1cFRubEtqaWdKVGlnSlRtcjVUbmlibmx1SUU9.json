{"title":"区块链应用——比特币","date":"2018-11-04T16:00:00.000Z","author":"Chambers","thumbnail":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1541068337211&di=23b86708a7e9fb2e08df80adf6f57439&imgtype=0&src=http%3A%2F%2Fm.qukuaiwang.com.cn%2FPublic%2Fattached%2F2018%2F07%2F23%2F153233350865475.jpg","excerpt":"","slug":"区块链应用——比特币","comments":true,"dropcap":false,"tags":["区块链"],"categories":["区块链"],"updated":"2018-11-01T12:17:33.774Z","content":"<h3 id=\"1-区块链应用场景\"><a href=\"#1-区块链应用场景\" class=\"headerlink\" title=\"1.区块链应用场景\"></a>1.区块链应用场景</h3><ul>\n<li>资产：数字资产发行、支付（跨境支付）、交易、结算</li>\n<li>记账：股权交易、供应链金融、商业积分</li>\n<li>不可篡改：溯源、众筹、医疗证明、存在性证明</li>\n<li>点对点：共享经济、物联网</li>\n<li>隐私：匿名交易</li>\n</ul>\n<hr>\n<h3 id=\"2-比特币是什么\"><a href=\"#2-比特币是什么\" class=\"headerlink\" title=\"2.比特币是什么\"></a>2.比特币是什么</h3><p>比特币首先是一种数字货币。</p>\n<p>先说说数字货币。货币即一般等价物，那我们是不是也可以认为一串数字也可以是货币呢？当这串数字成为人们的共识，得到人们的信任，那么，这就是数字货币。</p>\n<p>那你可能会问我们为什么要信任这串数字呢？它值得信任吗？</p>\n<ol>\n<li>财产只受自己控制。比特币的世界里面，财产只受自己控制，而不像现实世界中我们的钱币寄存在银行里面，具有被银行冻结的风险，即具有不可控性。</li>\n<li>无通胀。比特币总数量是固定的（大概是2100万个），不会扩大发行。</li>\n<li>无假钞。在比特币的世界里，任何作弊、作假的支付无法得到其他矿工的确认。</li>\n<li>流通性好。点对点交易，特别是在国际交易、转账的应用场景里面优势更为明显。</li>\n</ol>\n<p>其次，比特币还是一种去中心化的记账系统。即它采用的是分布式数据库，数据会保存在每一个节点中，每一个节点都保存着相同的数据。而非集中在一台服务器、数据库中。</p>\n<p>那么，如果有人偷偷篡改了账本的数据，我们是怎么发现的呢？即账本是如何验证其有效性的呢？</p>\n<p>这里就引入一个概念：Hash。Hash函数的特点是同样的原始信息用同一个Hash函数总能得到相同的摘要信息，原始信息任何微小的变化都会哈希出完全不一样的摘要信息，并且，我们是无法从摘要信息逆向推算出原始信息。</p>\n<p>所以，我们就可以从Hash值来推断出数据是否有被篡改过。一般来说，我们当前的区块是由这么几部分组成的：区块序号、记录时间戳、上一区块节点的hash值、当前区块的hash值、数据内容。当前区块的hash值的计算方式是：对区块序号、记录时间戳、上一区块节点的hash值和数据内容进行hash运算。下一区块节点的hash总是和上一个区块节点是相关的，因此，核对账本有效性时就只需要核对区块链中最后一个区块的有效性，就能知道整条区块链是否有效。</p>\n<hr>\n<h3 id=\"3-账户所有权问题\"><a href=\"#3-账户所有权问题\" class=\"headerlink\" title=\"3.账户所有权问题\"></a>3.账户所有权问题</h3><p>现实生活中，银行是通过核对开户人信息与当前操作者的信息来核实账户所有权问题的。<br>那比特币体系中是如何确定账户所有权问题的呢？</p>\n<p>账本中只记录交易双方的地址，而不记录交易双方的个人信息（所以有很好的隐私性），谁通过这个地址来进行交易，谁就拥有这个账户的所有权。而一个地址对应着一个私钥，私钥泄露的话，比特币就有可能丢失了，所以我们一定要保管好这个私钥。（PS：私钥可以通过两次hash运算推导出地址，但是不能反过来从地址推导出私钥）</p>\n<p>那么，我们怎么在不亮出私钥的前提下证明自己拥有这个私钥以通过其它节点的验证呢？<br>这里就用到了非对称加密技术。</p>\n<ol>\n<li>首先，我们对交易信息进行一次hash运算得到交易摘要Hash((2A234CCW…-&gt;SD87782… “2BTC”))，</li>\n<li>然后，用这个交易摘要和自己的私钥进行签名运算，生成签名信息(sign)。</li>\n<li>之后，产生交易的节点就会向其他节点广播以下内容：交易信息(2A234CCW…-&gt;SD87782… “2BTC”) + 刚才生成的签名(sign)。</li>\n<li>其它节点验证（verify(签名信息sign,付款方地址)-&gt;交易摘要）通过后就会继续向他的相邻节点进行广播，直到所有节点都验证通过，这份交易记录就被认为是有效的，可以安心写入到帐本中了。</li>\n</ol>\n<hr>\n<h3 id=\"4-挖矿过程\"><a href=\"#4-挖矿过程\" class=\"headerlink\" title=\"4.挖矿过程\"></a>4.挖矿过程</h3><p>记账其实是hash打包验证的过程，这里必定会消耗计算机资源，要付出成本，那为什么节点要参与记账呢？</p>\n<p>完成记账的节点是可以获得一定数量的比特币作为奖励的，这个奖励其实也就是比特币发行的过程。<br>每次记账会发行一定数量的比特币，这就会引起节点的争相记账，如果大家都去记账的话，就会出现记账不一致的情况。为了解决这个问题，比特币体系也有自己的规则：一段时间（一般是10分钟）内只有一人可以记账成功，并且需要通过解决密码学难题（即工作量证明）竞争获得唯一的记账权，第一个节点计算出来之后，其他节点便复制记账结果。</p>\n<p>计算当前节点的hash很简单，即通过上一个hash值和交易记录集可以算出。但是，为了增强挖矿的难度，规则规定，你不仅要通过上一个hash值和交易记录集来计算，还要加上一个随机数来hash计算出一个伪hash值（n个0再加上真hash值），这就是所谓的密码学难题，你为了算出这个值，必须花费一定的工作量来计算，也就是挖矿。</p>\n<p>前面所说到的交易记录集指的是收集广播中还没有被记录账本的交易，然后校验这些交易的有效性，然后再添加一笔给自己转账的交易（挖矿奖励）。这样，当你是第一个算出来的节点，就有权把这笔交易写进账本里，使奖励生效。</p>\n<hr>\n<h3 id=\"5-共识机制\"><a href=\"#5-共识机制\" class=\"headerlink\" title=\"5.共识机制\"></a>5.共识机制</h3><p>那么问题来了，两个节点同时完成工作量证明，使用谁的区块？</p>\n<p>节点选择出累计工作量最大（/最长）的区块链，再以此区块链通过不断挖矿来继续延长该区块链，共识机制就是来保证此要求。</p>\n<p>例如，两个节点同时完成工作量证明，分别打包成3458A和3458B，周围的节点选择出累计工作量最大（/最长）的区块链为3458A后进行广播，以3458A作为主链，3458B作为备用。</p>\n<hr>\n<p>PS：<a href=\"https://github.com/cmh1996/easy-blockchain\" target=\"_blank\" rel=\"noopener\">这是一个简单的入门demo</a></p>\n","prev":{"title":"Linux学习笔记","slug":"Linux学习笔记"},"next":{"title":"该学学TypeScript了","slug":"该学学TypeScript了"}}